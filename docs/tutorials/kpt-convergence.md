<!-- TODO by MH -->

This page explains how to run a k-point convergence study in density functional theory. K-point convergence can be run either as a stand-alone workflow or prepended to any property calculation.

# Background

The motivation behind using k-point convergence is explained in detail [here](/models/convergence-algorithms.png "kpt convergence")  This page will focus on the practical steps to use k-point convergence.

# Create job

K-point convergence studies are useful for many different property calculations, but we will use k-point convergence for a simple Total Energy calculation in this tutorial

To create a new project, click on the "Project" link located in the sidebar/menu on the left. After that, click <i class="zmdi zmdi-plus-circle zmdi-hc-border"></i> button in the top right corner, as shown in the animation below. Every user has a default project and we will use during this tutorial.

Chose the FCC Si structure provided by default for every user.  The exact list of materials in your personal database will differ, so you may need to search for the Si structure and select it as shown below:

<img data-gifffer="/images/ConvergeStep1.gif" />

# Choose workflow

Next, click on the "Workflow" tab choose VASP as the simulation engine to be used and choose the "Total Energy" workflow.

Then, to add k-point convergence as a pre-processor to total energy calculation, expand the <i class="zmdi zmdi-plus-circle zmdi-hc-border"></i> Advanced section to show un-highlighted buttons for Relaxation and k-point convergence.  Click on the k-point convergence.  If you scroll down the screen to look at the computation units and then toggle the k-point convergence button on and off in the "Advanced" section you will see the units various units that are added for convergence to set up the parameters to increase k-point density and track the total energy throughout the study.

<img data-gifffer="/images/ConvergeStep2.gif" />

# Examine unit input files

If you click on the kpt-convergence unit, you can see the content of the input files used for the convergence study VASP calculation.  You'll notice the KPOINTS file is different than a typical VASP KPOINTS file.  Do not edit this file as the text regarding the PARAMETER is necessary to enable this automated workflow to function correctly.

Clicking on the "vasp" unit will also show you the input files for the final total energy calculation.  Please note that the KPOINTS file displayed in this section is just a placeholder and will be overwritten by a KPOINT file equivalent to the converged k-point density found in the earlier part of the workflow.

<img data-gifffer="/images/ConvergeStep3.gif" />

# Submit job

Before submitting the calculation, click on the "Go to Compute" button and examine the compute parameters.  The example below shows how to increase the total run time to 15 minutes, the number of cores to 2 cores, and how to turn on email notifications of when the job starts and ends.

<img data-gifffer="/images/ConvergeStep4.gif" />

Since you are using the default Si structure as input, the database check will warn you that you are starting a job with a structure already in the database and ask whether you would like to save another copy of the material.  Click "No" to minimize the copies of the material.

# Monitor status

Finally while the calculation is running you will see a tab for each of the VASP execution units in the workflow.  You will notice the kpt-convergence tab will update in real time as the simulations progress.  The graphical interface will show the delta energy between successive self-consistent steps in the DFT calculation for all SCF steps in all simulations as k-point density is increased.  The text based output of VASP also updates in real time with the output of each VASP simulation concatenated to the previous output.

<img data-gifffer="/images/ConvergeStep5.gif" />

!!! Note "Future developments"
    In the future we will split each simulation of a k-point convergence study into different data series to make the progress of each step more clear.  In addition we will also separate the text output of each individual simulation into it's own tracking box.

# Check results

When both calculation units are complete, the yellow buttons will have turned green and the "Results" tab will become clickable.  You can click on the "Results" tab to see the final total energy, Fermi energy, and more information about each execution unit.

<img data-gifffer="/images/ConvergeStep6.gif" />

# Converged k-point density

Finally you can also browse the actual output and input files that are part of the calculation at the bottom of the results page.  If you are interested in determining the k-point density at which convergence was reached, simply open the KPOINTS file and you will see the converged density of 21x21x21.